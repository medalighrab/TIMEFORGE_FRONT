<app-header-front></app-header-front>
<div class="container mt-4">
  <h2>Task List</h2>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>ID</th>
        <th>Title</th>
        <th>Description</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let task of tasks">
        <td>{{ task.id }}</td>
        <td>{{ task.name }}</td>
        <td>{{ task.description }}</td>
        <td>{{ task.status }}</td>
        <td>
          <button class="btn btn-primary" (click)="openDrawer(task)">Assign Goal</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Overlay -->
<div class="overlay" *ngIf="isDrawerOpen" (click)="closeDrawer()"></div>

<!-- Custom Drawer -->
<div class="custom-drawer" [class.open]="isDrawerOpen">
  <div class="drawer-header">
    <h3>Assign Goal to Task #{{ selectedTask?.id }}</h3>
    <button class="btn-close" (click)="closeDrawer()">Ã—</button>
  </div>

  <div class="drawer-body">
    <!-- Title -->
    <label>Title</label>
    <input type="text" [(ngModel)]="title" class="form-control" placeholder="Enter Goal Title" />

    <!-- Description -->
    <label>Description</label>
    <textarea [(ngModel)]="description" class="form-control" placeholder="Enter Goal Description"></textarea>

    <!-- Start Date -->
    <label>Start Date</label>
    <input type="date" [(ngModel)]="starDate" class="form-control" />

    <!-- End Date -->
    <label>End Date</label>
    <input type="date" [(ngModel)]="endDate" class="form-control" />

    <!-- Status Goal -->
    <label>Status Goal</label>
    <select [(ngModel)]="statusGoal" class="form-control">
      <option value="NOT_STARTED">Not Started</option>
      <option value="IN_PROGRESS">In Progress</option>
      <option value="COMPLETED">Completed</option>
    </select>

    <!-- Buttons -->
    <button class="btn btn-success mt-2" (click)="assignGoal()">Save Goal</button>
    <button class="btn btn-danger mt-2" (click)="closeDrawer()">Close</button>
  </div>
</div>